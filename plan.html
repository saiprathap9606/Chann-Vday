<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Warm-up Game ðŸŽ³</title>
<style>
  body {
    margin: 0;
    background: radial-gradient(#3a0057, #120018);
    font-family: monospace;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .card {
    width: 380px;
    background: #0d021a;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 0 40px rgba(255,0,150,.3);
  }

  h1 {
    text-align: center;
    margin: 10px 0 5px;
  }

  h2 {
    text-align: center;
    font-size: 14px;
    opacity: .8;
    margin-bottom: 15px;
  }

  .lane {
    position: relative;
    height: 360px;
    background: linear-gradient(#6b4a2d, #3e2a18);
    border-radius: 14px;
    overflow: hidden;
  }

  /* Gutters */
  .lane::before,
  .lane::after {
    content: "";
    position: absolute;
    top: 0;
    width: 25px;
    height: 100%;
    background: #1b0f07;
  }
  .lane::before { left: 0; }
  .lane::after { right: 0; }

  /* Center guide */
  .guide {
    position: absolute;
    left: 50%;
    top: 0;
    width: 40px;
    height: 100%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.06);
  }

  .ball {
    position: absolute;
    bottom: 20px;
    left: 50%;
    width: 28px;
    height: 28px;
    background: radial-gradient(circle at 30% 30%, #999, #111);
    border-radius: 50%;
    transform: translateX(-50%);
    pointer-events: none;
  }

  .pin {
    position: absolute;
    width: 18px;
    height: 40px;
    background: white;
    border-radius: 9px 9px 6px 6px;
    transition: transform .4s ease, opacity .4s ease;
  }

  .pin::after {
    content: "";
    position: absolute;
    top: 12px;
    width: 100%;
    height: 6px;
    background: red;
  }

  .fallen {
    transform: rotate(70deg) translateY(20px);
    opacity: 0;
  }

  .score {
    margin-top: 10px;
    font-size: 14px;
  }

  .footer {
    text-align: center;
    margin-top: 15px;
  }

  button {
    background: hotpink;
    border: none;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 14px;
    cursor: pointer;
  }

  .hidden {
    display: none;
  }
</style>
</head>

<body>
<div class="card">
  <h1>Warm-up game ðŸŽ³</h1>
  <h2>Three rolls. Chan starts ðŸ˜Š</h2>

  <div class="lane" id="lane">
    <div class="guide"></div>
    <div class="ball" id="ball"></div>
  </div>

  <div class="score" id="score">
    Roll: 1 / 3<br>
    Pins hit: 0<br>
    Total: 0
  </div>

  <div class="footer">
    <button onclick="restart()">Restart</button>
  </div>

  <div class="footer hidden" id="done">
    <p>Now get ready to play for real ðŸ˜Š<br>
    After lunch, weâ€™re going bowling ðŸŽ³</p>
    <button onclick="location.href='confirm.html'">Next ðŸ’•</button>
  </div>
</div>

<script>
const lane = document.getElementById("lane");
const ball = document.getElementById("ball");
const scoreBox = document.getElementById("score");
const done = document.getElementById("done");

let roll = 1;
let total = 0;
let rolling = false;
let pins = [];

function createPins() {
  pins.forEach(p => p.remove());
  pins = [];

  const center = lane.offsetWidth / 2;

  const rows = [
    [0],
    [-15, 15],
    [-30, 0, 30],
    [-45, -15, 15, 45]
  ];

  rows.forEach((row, r) => {
    row.forEach(x => {
      const pin = document.createElement("div");
      pin.className = "pin";
      pin.style.left = center + x - 9 + "px";
      pin.style.top = 40 + r * 35 + "px";
      lane.appendChild(pin);
      pins.push(pin);
    });
  });
}

createPins();

lane.addEventListener("mousemove", e => {
  if (rolling) return;
  const rect = lane.getBoundingClientRect();
  let x = e.clientX - rect.left;
  x = Math.max(40, Math.min(rect.width - 40, x));
  ball.style.left = x + "px";
});

lane.addEventListener("click", () => {
  if (rolling || roll > 3) return;
  rolling = true;

  let y = 20;
  const interval = setInterval(() => {
    y += 6;
    ball.style.bottom = y + "px";

    if (y > 280) {
      clearInterval(interval);
      hitPins();
    }
  }, 16);
});

function hitPins() {
  let hit = 0;
  const ballX = ball.getBoundingClientRect().left;

  pins.forEach(pin => {
    const px = pin.getBoundingClientRect().left;
    if (Math.abs(ballX - px) < 25 && !pin.classList.contains("fallen")) {
      pin.classList.add("fallen");
      hit++;
    }
  });

  total += hit;
  scoreBox.innerHTML = `
    Roll: ${roll} / 3<br>
    Pins hit: ${hit}<br>
    Total: ${total}
  `;

  roll++;
  rolling = false;
  ball.style.bottom = "20px";

  if (roll > 3) {
    done.classList.remove("hidden");
  } else {
    setTimeout(createPins, 500);
  }
}

function restart() {
  roll = 1;
  total = 0;
  rolling = false;
  done.classList.add("hidden");
  scoreBox.innerHTML = `Roll: 1 / 3<br>Pins hit: 0<br>Total: 0`;
  createPins();
}
</script>
</body>
</html>
