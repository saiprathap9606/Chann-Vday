<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Warm-up Game ðŸŽ³</title>

<style>
body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at top, #3a004d, #0b0014);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Courier New', monospace;
  color: #fff;
}

.card {
  width: 420px;
  background: #0f0a1f;
  border-radius: 24px;
  padding: 24px;
  box-shadow: 0 0 40px rgba(255,0,170,.35);
  text-align: center;
}

h1 { margin: 0; }
.sub { opacity: .8; margin-bottom: 12px; }

.lane {
  position: relative;
  height: 320px;
  background: linear-gradient(#4b3528, #1f140f);
  border-radius: 18px;
  margin: 20px 0;
  overflow: hidden;
  cursor: pointer;
}

/* STRIKE ZONE */
.strike-zone {
  position: absolute;
  inset: 0;
  width: 80px;
  margin: auto;
  background: rgba(255,255,255,.08);
  box-shadow: inset 0 0 25px rgba(255,255,255,.35);
}

/* BALL */
.ball {
  position: absolute;
  bottom: 20px;
  left: 50%;
  width: 22px;
  height: 22px;
  background: radial-gradient(circle at 30% 30%, #aaa, #333);
  border-radius: 50%;
  transform: translateX(-50%);
  transition: left .12s linear;
}

.ball.roll {
  animation: roll 1.2s ease-out forwards;
}

@keyframes roll {
  to { bottom: 240px; }
}

/* PINS */
.pins {
  position: absolute;
  top: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: grid;
  grid-template-columns: repeat(4, 24px);
  gap: 10px 16px;
}

.pin {
  width: 18px;
  height: 40px;
  background: #fff;
  border-radius: 8px 8px 4px 4px;
  position: relative;
  transition: transform .6s ease, opacity .6s ease;
}

.pin::after {
  content:'';
  position:absolute;
  top:10px;
  left:0;
  right:0;
  height:6px;
  background:#c00;
}

.pin.down {
  transform: rotate(25deg) translateY(25px);
  opacity:.25;
}

/* SCORE */
.score {
  text-align:left;
  font-size:14px;
}

.message {
  margin:10px 0;
}

button {
  width:100%;
  margin-top:12px;
  padding:14px;
  background:#ff4fa3;
  border:none;
  border-radius:14px;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}

button.hidden { display:none; }

</style>
</head>

<body>

<div class="card">
  <h1>Warm-up game ðŸŽ³</h1>
  <div class="sub">Three rolls. Chan starts ðŸ˜Œ</div>

  <div class="lane" id="lane">
    <div class="strike-zone"></div>

    <!-- TRIANGLE: 1-2-3-4 -->
    <div class="pins" id="pins">
      <div class="pin"></div>

      <div class="pin"></div>
      <div class="pin"></div>

      <div class="pin"></div>
      <div class="pin"></div>
      <div class="pin"></div>

      <div class="pin"></div>
      <div class="pin"></div>
      <div class="pin"></div>
      <div class="pin"></div>
    </div>

    <div class="ball" id="ball"></div>
  </div>

  <div class="message" id="message"></div>

  <div class="score" id="score">
    <strong>Chanâ€™s Score</strong><br>
    Round 1: â€“<br>
    Round 2: â€“<br>
    Round 3: â€“<br>
    <strong>Total: 0</strong>
  </div>

  <button id="next" class="hidden">Next ðŸ’•</button>
</div>

<script>
let round = 1;
let scores = [];
let aim = 0.5;
let rolling = false;

const lane = document.getElementById('lane');
const ball = document.getElementById('ball');
const pins = [...document.querySelectorAll('.pin')];
const msg = document.getElementById('message');
const scoreEl = document.getElementById('score');
const nextBtn = document.getElementById('next');

/* AIM */
lane.addEventListener('mousemove', e => {
  if (rolling) return;
  const r = lane.getBoundingClientRect();
  aim = (e.clientX - r.left) / r.width;
  aim = Math.max(.1, Math.min(.9, aim));
  ball.style.left = `${aim * 100}%`;
});

/* ROLL ON CLICK */
lane.addEventListener('click', () => {
  if (rolling || round > 3) return;
  rolling = true;
  ball.classList.add('roll');

  const accuracy = Math.abs(aim - .5);
  let knocked =
    accuracy < .04 ? 10 :
    accuracy < .08 ? 7 :
    accuracy < .14 ? 5 : 2;

  setTimeout(() => {
    pins.slice(0, knocked).forEach(p => p.classList.add('down'));

    scores.push(knocked);
    msg.innerHTML = knocked === 10
      ? "STRIKE! ðŸŽ‰ Nice roll ðŸ˜"
      : "Nice roll ðŸ˜";

    updateScore();

    if (knocked === 10 || round === 3) {
      nextBtn.classList.remove('hidden');
    } else {
      round++;
      setTimeout(resetLane, 900);
    }
  }, 900);
});

/* RESET */
function resetLane() {
  pins.forEach(p => p.classList.remove('down'));
  ball.classList.remove('roll');
  ball.style.bottom = '20px';
  rolling = false;
}

/* SCORE */
function updateScore() {
  const total = scores.reduce((a,b)=>a+b,0);
  scoreEl.innerHTML = `
    <strong>Chanâ€™s Score</strong><br>
    Round 1: ${scores[0] ?? 'â€“'}<br>
    Round 2: ${scores[1] ?? 'â€“'}<br>
    Round 3: ${scores[2] ?? 'â€“'}<br>
    <strong>Total: ${total}</strong>
  `;
}

nextBtn.onclick = () => location.href = "confirm.html";
</script>

</body>
</html>
