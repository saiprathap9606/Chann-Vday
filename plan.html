<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Warm-up Bowl ğŸ³</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #32004f, #070012);
  font-family: monospace;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  width: 370px;
  background: rgba(12, 8, 30, 0.97);
  border-radius: 22px;
  padding: 22px;
  box-shadow: 0 0 55px rgba(255, 0, 150, 0.45);
  text-align: center;
}

h2 {
  margin: 0;
}

.sub {
  font-size: 14px;
  opacity: 0.8;
  margin-bottom: 12px;
}

/* ğŸ³ LANE */
.lane {
  margin: 14px 0;
  background: linear-gradient(#3b2f2f, #241919);
  height: 170px;
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

/* ğŸ³ PINS â€“ REAL TRIANGLE */
.pins {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
}

.pin {
  font-size: 20px;
  animation: wobble 1.4s infinite;
}

@keyframes wobble {
  0%,100% { transform: rotate(0); }
  50% { transform: rotate(6deg); }
}

.fallen {
  transform: rotate(90deg) translateY(10px);
  opacity: 0.25;
  animation: none;
}

/* BALL */
.ball {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 28px;
}

/* ğŸ¯ POWER METER */
.meter {
  height: 12px;
  background: #1f2937;
  border-radius: 10px;
  overflow: hidden;
  margin-top: 10px;
  position: relative;
}

.strike-zone {
  position: absolute;
  left: 45%;
  width: 10%;
  height: 100%;
  background: rgba(255, 215, 0, 0.35);
  box-shadow: 0 0 14px gold;
}

.meter-fill {
  height: 100%;
  width: 30%;
  background: linear-gradient(90deg, #ff4fa3, #ffd36e);
  animation: move 1.4s linear infinite alternate;
}

@keyframes move {
  from { transform: translateX(0); }
  to { transform: translateX(230px); }
}

/* BUTTON */
button {
  width: 100%;
  padding: 12px;
  background: #ff4fa3;
  border: none;
  border-radius: 14px;
  color: white;
  font-size: 16px;
  margin-top: 14px;
  cursor: pointer;
}

/* FEEDBACK */
#feedback {
  margin-top: 10px;
  font-size: 14px;
  height: 18px;
}

/* SCORE */
.scorecard {
  margin-top: 14px;
  font-size: 14px;
  line-height: 1.6;
}

/* TROPHY */
#trophy {
  font-size: 42px;
  display: none;
  animation: pop 0.8s ease forwards;
}

@keyframes pop {
  0% { transform: scale(0); opacity: 0; }
  70% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); }
}

/* END */
#ending, #nextBtn {
  display: none;
  margin-top: 14px;
}
</style>
</head>

<body>

<div class="card">
  <h2>Warm-up game ğŸ³</h2>
  <div class="sub">Three rolls. Chan starts ğŸ˜Œ</div>

  <div class="lane">
    <div class="pins" id="pins"></div>
    <div class="ball">ğŸ³</div>
  </div>

  <div class="meter">
    <div class="strike-zone"></div>
    <div class="meter-fill" id="meter"></div>
  </div>

  <button onclick="bowl()">BOWL ğŸ³</button>

  <div id="feedback"></div>
  <div id="trophy">ğŸ†</div>

  <div class="scorecard" id="scorecard">
    <strong>Chanâ€™s Score</strong><br>
    Round 1: â€“<br>
    Round 2: â€“<br>
    Round 3: â€“<br>
    <strong>Total: 0</strong>
  </div>

  <div id="ending">
    <strong>Now get ready to play for real ğŸ˜ŒğŸ³</strong><br>
    After lunch, weâ€™re going bowling.
  </div>

  <button id="nextBtn" onclick="goNext()">Next ğŸ’•</button>
</div>

<!-- ğŸ”Š SOUNDS -->
<audio id="rollSound" src="https://www.soundjay.com/sports/bowling-ball-roll-01.mp3"></audio>
<audio id="cheerSound" src="https://www.soundjay.com/human/applause-8.mp3"></audio>

<script>
let round = 0;
let scores = [];

function setupPins() {
  const p = document.getElementById("pins");
  p.innerHTML = "";
  const layout = [1,2,3,4];
  layout.forEach((count, row) => {
    for (let i = 0; i < count; i++) {
      const pin = document.createElement("div");
      pin.className = "pin";
      pin.textContent = "ğŸ³";
      p.appendChild(pin);
    }
  });
}
setupPins();

function bowl() {
  if (round >= 3) return;

  document.getElementById("feedback").textContent = "";
  document.getElementById("trophy").style.display = "none";

  document.getElementById("rollSound").volume = 0.25;
  document.getElementById("rollSound").play();

  const meter = document.getElementById("meter");
  const pos = meter.getBoundingClientRect().left -
              meter.parentElement.getBoundingClientRect().left;

  let score;
  if (pos > 95 && pos < 125) {
    score = 10;
    document.getElementById("feedback").textContent = "STRIKE!! ğŸ”¥";
    document.getElementById("trophy").style.display = "block";
    document.getElementById("cheerSound").volume = 0.25;
    document.getElementById("cheerSound").play();
    confetti();
  } else if (pos > 70 && pos < 150) {
    score = 7;
    document.getElementById("feedback").textContent = "Nice roll ğŸ˜";
  } else {
    score = Math.floor(Math.random() * 4) + 1;
    document.getElementById("feedback").textContent = "Almost ğŸ˜‰";
  }

  scores.push(score);
  round++;

  const pins = document.querySelectorAll(".pin");
  for (let i = 0; i < score && i < pins.length; i++) {
    pins[i].classList.add("fallen");
  }

  updateScore();

  if (score === 10 || round === 3) {
    document.getElementById("ending").style.display = "block";
    document.getElementById("nextBtn").style.display = "block";
  } else {
    setTimeout(setupPins, 900);
  }
}

function updateScore() {
  let total = scores.reduce((a,b)=>a+b,0);
  let html = "<strong>Chanâ€™s Score</strong><br>";
  for (let i = 0; i < 3; i++) {
    html += `Round ${i+1}: ${scores[i] ?? "â€“"}<br>`;
  }
  html += `<strong>Total: ${total}</strong>`;
  document.getElementById("scorecard").innerHTML = html;
}

function goNext() {
  window.location.href = "excited.html";
}

/* ğŸ‰ CONFETTI */
function confetti() {
  for (let i = 0; i < 20; i++) {
    const c = document.createElement("div");
    c.textContent = "ğŸ‰";
    c.style.position = "fixed";
    c.style.left = Math.random() * 100 + "vw";
    c.style.top = "-20px";
    c.style.fontSize = "18px";
    c.style.animation = "fall 1.5s linear";
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 1500);
  }
}
</script>

<style>
@keyframes fall {
  to { transform: translateY(100vh); opacity: 0; }
}
</style>

</body>
</html>
