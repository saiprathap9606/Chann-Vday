<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Warm-up Game ðŸŽ³</title>

<style>
  * { box-sizing: border-box; font-family: 'Courier New', monospace; }

  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #3a004f, #0b0016);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
  }

  .card {
    width: 420px;
    background: #0f0620;
    border-radius: 20px;
    padding: 24px;
    box-shadow: 0 30px 80px rgba(0,0,0,.6);
    text-align: center;
  }

  h1 {
    margin: 0;
    font-size: 28px;
  }

  .sub {
    opacity: .8;
    margin-bottom: 18px;
  }

  /* ---------- LANE ---------- */

  .lane-wrap {
    position: relative;
    margin: 18px 0;
    height: 260px;
    border-radius: 14px;
    overflow: hidden;
    background: linear-gradient(#5b3a24, #2d1a0f);
  }

  .gutter {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 60px;
    background: linear-gradient(#1b1b1b, #000);
    z-index: 1;
  }

  .gutter.left { left: 0; }
  .gutter.right { right: 0; }

  .lane {
    position: absolute;
    left: 60px;
    right: 60px;
    top: 0;
    bottom: 0;
    background: linear-gradient(#7a4b2a, #3a1f10);
    box-shadow: inset 0 0 40px rgba(0,0,0,.4);
  }

  /* ---------- PINS ---------- */

  .pin {
    position: absolute;
    width: 22px;
    height: 44px;
    border-radius: 10px 10px 8px 8px;
    background: linear-gradient(#fff, #ddd);
    box-shadow:
      inset 0 -6px 0 #c00,
      0 6px 10px rgba(0,0,0,.5);
    transition: transform .6s ease, opacity .6s ease;
  }

  .pin.fall {
    transform: rotate(70deg) translateY(30px);
    opacity: .2;
  }

  /* ---------- BALL ---------- */

  .ball {
    position: absolute;
    bottom: 10px;
    left: 50%;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #666, #111);
    box-shadow: 0 6px 12px rgba(0,0,0,.8);
    transform: translateX(-50%);
    transition: top .8s linear, left .8s linear;
    z-index: 3;
  }

  /* ---------- UI ---------- */

  .feedback {
    height: 24px;
    margin-top: 6px;
  }

  .score {
    margin-top: 14px;
    text-align: left;
    font-size: 15px;
  }

  .score b { font-size: 18px; }

  .end {
    margin-top: 14px;
    display: none;
  }

  .next {
    margin-top: 14px;
    padding: 14px;
    background: #ff5aa7;
    border-radius: 12px;
    font-size: 18px;
    cursor: pointer;
  }

  /* ---------- CONFETTI ---------- */

  .confetti {
    position: fixed;
    top: -10px;
    width: 8px;
    height: 8px;
    background: pink;
    animation: fall 2s linear forwards;
  }

  @keyframes fall {
    to { transform: translateY(110vh) rotate(360deg); }
  }
</style>
</head>

<body>

<div class="card">
  <h1>Warm-up game ðŸŽ³</h1>
  <div class="sub">Three rolls. Chan starts ðŸ˜Š</div>

  <div class="lane-wrap" id="lane">
    <div class="gutter left"></div>
    <div class="gutter right"></div>
    <div class="lane"></div>

    <!-- BALL -->
    <div class="ball" id="ball"></div>

    <!-- PINS (triangle) -->
    <!-- row 1 -->
    <div class="pin" style="top:30px; left:170px"></div>
    <!-- row 2 -->
    <div class="pin" style="top:60px; left:155px"></div>
    <div class="pin" style="top:60px; left:185px"></div>
    <!-- row 3 -->
    <div class="pin" style="top:90px; left:140px"></div>
    <div class="pin" style="top:90px; left:170px"></div>
    <div class="pin" style="top:90px; left:200px"></div>
    <!-- row 4 -->
    <div class="pin" style="top:120px; left:125px"></div>
    <div class="pin" style="top:120px; left:155px"></div>
    <div class="pin" style="top:120px; left:185px"></div>
    <div class="pin" style="top:120px; left:215px"></div>
  </div>

  <div class="feedback" id="feedback"></div>

  <div class="score">
    <b>Chanâ€™s Score</b><br>
    Round 1: <span id="r1">â€“</span><br>
    Round 2: <span id="r2">â€“</span><br>
    Round 3: <span id="r3">â€“</span><br>
    <b>Total: <span id="total">0</span></b>
  </div>

  <div class="end" id="end">
    <p>Now get ready to play for real ðŸ˜ŒðŸŽ³<br>
    After lunch, weâ€™re going bowling.</p>
    <div class="next" onclick="location.href='confirm.html'">Next ðŸ’•</div>
  </div>
</div>

<audio id="cheer" src="https://assets.mixkit.co/sfx/preview/mixkit-crowd-cheer-joy-464.mp3"></audio>

<script>
  const lane = document.getElementById('lane');
  const ball = document.getElementById('ball');
  const pins = [...document.querySelectorAll('.pin')];
  const feedback = document.getElementById('feedback');

  let roll = 0;
  let total = 0;
  let rolling = false;

  lane.addEventListener('click', e => {
    if (rolling || roll >= 3) return;
    rolling = true;

    const rect = lane.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const gutterHit = x < 60 || x > rect.width - 60;

    ball.style.left = x + 'px';
    ball.style.top = '40px';

    setTimeout(() => {
      let hit = 0;

      if (!gutterHit) {
        pins.forEach(p => {
          if (!p.classList.contains('fall')) {
            const px = p.offsetLeft + 11;
            if (Math.abs(px - x) < 30) {
              p.classList.add('fall');
              hit++;
            }
          }
        });
      }

      roll++;
      document.getElementById('r'+roll).textContent = hit;
      total += hit;
      document.getElementById('total').textContent = total;

      if (hit === 10) {
        feedback.textContent = 'STRIKE! ðŸŽ‰ Nice roll ðŸ˜';
        celebrate();
        endGame();
      } else {
        feedback.textContent = hit === 0 ? 'Oopsâ€¦ gutter ðŸ˜…' : 'Nice roll ðŸ˜Œ';
      }

      ball.style.top = '210px';
      ball.style.left = '50%';
      rolling = false;

      if (roll === 3) endGame();
    }, 900);
  });

  function celebrate() {
    document.getElementById('cheer').play();
    for (let i = 0; i < 40; i++) {
      const c = document.createElement('div');
      c.className = 'confetti';
      c.style.left = Math.random()*100 + 'vw';
      c.style.background = ['#ff5aa7','#ffd166','#06d6a0'][i%3];
      document.body.appendChild(c);
      setTimeout(()=>c.remove(),2000);
    }
  }

  function endGame() {
    document.getElementById('end').style.display = 'block';
  }
</script>

</body>
</html>
